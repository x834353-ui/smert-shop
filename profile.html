<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å - Smert Shop</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header>
        <nav>
            <a href="index.html" class="logo">Smert Shop</a>
            <button class="mobile-menu-btn">‚ò∞</button>
            <ul class="nav-links">
                <li><a href="index.html#catalog">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                <li><a href="index.html#about">–û –Ω–∞—Å</a></li>
                <li><a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a></li>
                <li><a href="profile.html" class="auth-link">üë§ –ü—Ä–æ—Ñ–∏–ª—å</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
        <section class="section">
            <div class="profile-info">
                <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
                <p><strong>Email:</strong> <span id="user-email"></span></p>
                <p><strong>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</strong> <span id="user-registered"></span></p>
                <button class="btn btn-danger mt-2" onclick="logout()">–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞</button>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏–π -->
            <div class="download-history">
                <h2>–ò—Å—Ç–æ—Ä–∏—è —Å–∫–∞—á–∏–≤–∞–Ω–∏–π</h2>
                <div id="download-history-list">
                    <!-- –ò—Å—Ç–æ—Ä–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ —á–µ—Ä–µ–∑ JavaScript -->
                </div>
            </div>
        </section>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <footer>
        <div class="footer-content">
            <div class="footer-links">
                <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="index.html#catalog">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="index.html#about">–û –Ω–∞—Å</a>
                <a href="index.html#contact">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
            </div>
            <p class="footer-copyright">¬© 2024 Smert Shop. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            if (!requireAuth()) {
                return;
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
            const currentUser = getCurrentUser();
            document.getElementById('user-email').textContent = currentUser.email;
            
            // –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
            const users = getUsers();
            const userDetails = users.find(u => u.id === currentUser.id);
            if (userDetails) {
                document.getElementById('user-registered').textContent = formatDate(userDetails.registeredAt);
            }

            // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–π
            const downloads = getUserDownloads();
            const historyList = document.getElementById('download-history-list');
            
            if (downloads.length === 0) {
                historyList.innerHTML = '<p style="color: var(--text-secondary);">–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞. –ù–∞—á–Ω–∏—Ç–µ —Å–∫–∞—á–∏–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞!</p>';
            } else {
                historyList.innerHTML = downloads.map(download => `
                    <div class="download-item">
                        <div class="download-item-name">${download.name}</div>
                        <div class="download-item-date">${formatDate(download.date)}</div>
                    </div>
                `).join('');
            }
        });
    </script>
</body>
</html>
